<!doctype html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="https://studio3d-sit.anker-in.com/anker-viewer/icons/logo.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Anker3D-后处理-屏幕空间环境光遮蔽</title>
  <link type="text/css" rel="stylesheet" href="style/main.css">
</head>
<body>

<div id="anker-viewer">
</div>
<script type="module">
  //引入SDK
  import * as Anker3D from "../src/index.ts"

  //获取容器
  const container = document.getElementById('anker-viewer');
  //创建查看器
  const viewer = new Anker3D.Viewer(container,{
    modelParams:{//模型参数
      urlOrId:'MB8974CC43',//三维平台模型id
    }
  });

  // 挂载到全局 window 对象，便于调试
  window.viewer = viewer;
  window.Anker3D = Anker3D;

  //显示性能监测器
  viewer.showStats();

  createDebugGUI();

  //创建调试UI
  function createDebugGUI() {
    const debugPanel = new Anker3D.GUI()
    // 背景色参数
    const debugParams = {
      ssaoEnabled:false,
      kernelRadius:8,minDistance:0.005,maxDistance:0.1
    }


    //屏幕空间环境光遮蔽
    const ssaoFolder = debugPanel.addFolder("屏幕空间环境光遮蔽");
    const ssaoPass = new Anker3D.SSAOPassComponent();
    ssaoFolder.add(debugParams, 'ssaoEnabled')
            .name('启用')
            .onChange((checked) => {
              if(checked){
                viewer.addComponent(ssaoPass);
              }
              else {
                viewer.removeComponent(ssaoPass);
              }
            });
    ssaoFolder.add( debugParams, 'kernelRadius', 0.0, 32 ).step( 1 ).onChange( function ( value ) {
      ssaoPass.kernelRadius = Number( value );
    } );

    ssaoFolder.add( debugParams, 'minDistance', 0.001, 0.02 ).step( 0.001 ).onChange( function ( value ) {
      ssaoPass.minDistance = Number( value );
    } );

    ssaoFolder.add( debugParams, 'maxDistance', 0.01, 0.3 ).step( 0.01 ).onChange( function ( value ) {
      ssaoPass.maxDistance = Number( value );
    } );

    ssaoFolder.open();

  }

</script>
</body>
</html>
